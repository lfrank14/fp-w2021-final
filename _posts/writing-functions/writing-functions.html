<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>Writing Functions</title>

  <meta property="description" itemprop="description" content="This is a tutorial for how to write your first custom function in R."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-05-13"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-05-13"/>
  <meta name="article:author" content="Sarah Dimakis"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Writing Functions"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="This is a tutorial for how to write your first custom function in R."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Writing Functions"/>
  <meta property="twitter:description" content="This is a tutorial for how to write your first custom function in R."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","categories","output","editor_options"]}},"value":[{"type":"character","attributes":{},"value":["Writing Functions"]},{"type":"character","attributes":{},"value":["This is a tutorial for how to write your first custom function in R.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Sarah Dimakis"]}]}]},{"type":"character","attributes":{},"value":["05-13-2021"]},{"type":"character","attributes":{},"value":["custom functions"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_float","self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["chunk_output_type"]}},"value":[{"type":"character","attributes":{},"value":["console"]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["writing-functions_files/anchor-4.2.2/anchor.min.js","writing-functions_files/bowser-1.9.3/bowser.min.js","writing-functions_files/distill-2.2.21/template.v2.js","writing-functions_files/header-attrs-2.8/header-attrs.js","writing-functions_files/jquery-1.11.3/jquery.min.js","writing-functions_files/kePrint-0.0.1/kePrint.js","writing-functions_files/lightable-0.0.1/lightable.css","writing-functions_files/popper-2.6.0/popper.min.js","writing-functions_files/tippy-6.2.7/tippy-bundle.umd.min.js","writing-functions_files/tippy-6.2.7/tippy-light-border.css","writing-functions_files/tippy-6.2.7/tippy.css","writing-functions_files/tippy-6.2.7/tippy.umd.min.js","writing-functions_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="writing-functions_files/header-attrs-2.8/header-attrs.js"></script>
  <script src="writing-functions_files/kePrint-0.0.1/kePrint.js"></script>
  <link href="writing-functions_files/lightable-0.0.1/lightable.css" rel="stylesheet" />
  <script src="writing-functions_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="writing-functions_files/popper-2.6.0/popper.min.js"></script>
  <link href="writing-functions_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="writing-functions_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="writing-functions_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="writing-functions_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="writing-functions_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="writing-functions_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="writing-functions_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Writing Functions","description":"This is a tutorial for how to write your first custom function in R.","authors":[{"author":"Sarah Dimakis","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-05-13T00:00:00.000-07:00","citationText":"Dimakis, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Writing Functions</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt=tag">custom functions</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>This is a tutorial for how to write your first custom function in R.</p></p>
</div>

<div class="d-byline">
  Sarah Dimakis  
  
<br/>05-13-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#load-libraries-and-read-in-data">Load libraries and read in data</a></li>
<li><a href="#functions">Functions</a></li>
<li><a href="#default-settings">Default settings</a></li>
<li><a href="#errors-and-warnings">Errors and warnings</a></li>
<li><a href="#example-function-1">Example function 1</a></li>
<li><a href="#example-function-2">Example function 2</a></li>
<li><a href="#tables">Tables</a></li>
</ul>
</nav>
</div>
<h1 id="load-libraries-and-read-in-data">Load libraries and read in data</h1>
<p>For this tutorial, you will first need to load <code>tidyverse</code> for data wrangling and <code>kableExtra</code> for tables. Next, I am using <code>rio::import</code> to import the cleaned data file to my environment. Note, you may need to change the file path if your file structure is not the same as mine. Last, I am using <code>mutate</code> and <code>case_when</code> to label the levels of the food_secure variable.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://haozhu233.github.io/kableExtra/'>kableExtra</a></span><span class='op'>)</span>

<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'>rio</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/rio/man/import.html'>import</a></span><span class='op'>(</span><span class='fu'>here</span><span class='fu'>::</span><span class='fu'><a href='https://here.r-lib.org//reference/here.html'>here</a></span><span class='op'>(</span><span class='st'>"data"</span>, <span class='st'>"nhanes_1999-2016.csv"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>food_security <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span><span class='va'>hh_food_secure</span> <span class='op'>==</span> <span class='fl'>1</span> <span class='op'>~</span> <span class='st'>"Fully food secure"</span>,
            <span class='va'>hh_food_secure</span> <span class='op'>==</span> <span class='fl'>2</span> <span class='op'>~</span> <span class='st'>"Marginally food secure"</span>,
            <span class='va'>hh_food_secure</span> <span class='op'>==</span> <span class='fl'>3</span> <span class='op'>~</span> <span class='st'>"Food insecure without hunger"</span>,
            <span class='va'>hh_food_secure</span> <span class='op'>==</span> <span class='fl'>4</span> <span class='op'>~</span> <span class='st'>"Food insecure with hunger"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="functions">Functions</h1>
<p>A <strong>function</strong> is code that carries out an operation. For example <code>+</code> is a function that carries out the operation addition.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fl'>2</span> <span class='op'>+</span> <span class='fl'>3</span>
</code></pre>
</div>
<pre><code>[1] 5</code></pre>
</div>
<p>In algebra, you may recall learning functions such as <span class="math inline">\(f(x,y) = x^2+y\)</span>, where you put in inputs <code>x = 2</code> and <code>y = 1</code>, the function computes the operation, <span class="math inline">\(2^2+1\)</span>, and outputs <span class="math inline">\(5\)</span>. Similarly, when using a function in R, it takes a form like <code>f(x,y,z..)</code> where f is the function name and x,y,z… are the arguments of the function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>`+`</span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 5</code></pre>
</div>
<p>Let’s create our first function in R called <code>my_pet()</code> that will print out a statement about your pet. For best practice, you should try to name your function something descriptive. It should also not be named another function that is popular like <code>mean</code> because it will overwrite the default <code>mean</code> function for your script.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>my_pet</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>pronoun</span>, <span class='va'>animal</span>, <span class='va'>verb</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>str_to_title</span><span class='op'>(</span><span class='va'>pronoun</span><span class='op'>)</span>, <span class='st'>" is a "</span>, <span class='va'>animal</span>, <span class='st'>" who likes to "</span>, <span class='va'>verb</span>, <span class='st'>"."</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>The <strong>arguments</strong> of the function (which are called <code>formals</code>) are what the user supplies the function to get their desired output. You can see the formals of a function in R by using the <code>formals()</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/formals.html'>formals</a></span><span class='op'>(</span><span class='va'>my_pet</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$pronoun


$animal


$verb</code></pre>
</div>
<p>The <strong>body</strong> of the function is where the function takes in the <code>formals</code> and creates the output. You can see the body of a function in R by using the <code>body()</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/body.html'>body</a></span><span class='op'>(</span><span class='va'>my_pet</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>{
    paste0(str_to_title(pronoun), &quot; is a &quot;, animal, &quot; who likes to &quot;, 
        verb, &quot;.&quot;)
}</code></pre>
</div>
<p>Now, in order to use the function, you can supply it with your desired formals.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>my_pet</span><span class='op'>(</span>pronoun <span class='op'>=</span> <span class='st'>"she"</span>, 
       animal <span class='op'>=</span> <span class='st'>"dog"</span>, 
       verb <span class='op'>=</span> <span class='st'>"play outside"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;She is a dog who likes to play outside.&quot;</code></pre>
</div>
<p>When you use your function, you can drop the argument names as long as you keep the same order.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>my_pet</span><span class='op'>(</span><span class='st'>"he"</span>, <span class='st'>"cat"</span>, <span class='st'>"sleep"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;He is a cat who likes to sleep.&quot;</code></pre>
</div>
<p>If you want to use arguments out of the order they were defined in, you will need to label them.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>my_pet</span><span class='op'>(</span>animal <span class='op'>=</span> <span class='st'>"lizard"</span>,
       pronoun <span class='op'>=</span><span class='st'>"she"</span>, 
       verb <span class='op'>=</span> <span class='st'>"eat"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;She is a lizard who likes to eat.&quot;</code></pre>
</div>
<h1 id="default-settings">Default settings</h1>
<p>You can set a “default” setting for an argument. This is the setting that occurs when the user does not specify the argument.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>my_pet2</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>pronoun</span>, <span class='va'>animal</span>, <span class='va'>verb</span> <span class='op'>=</span> <span class='st'>"dance"</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>str_to_title</span><span class='op'>(</span><span class='va'>pronoun</span><span class='op'>)</span>, <span class='st'>" is a "</span>, <span class='va'>animal</span>, <span class='st'>" who likes to "</span>, <span class='va'>verb</span>, <span class='st'>"."</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>my_pet2</span><span class='op'>(</span>pronoun <span class='op'>=</span> <span class='st'>"she"</span>,
        animal <span class='op'>=</span> <span class='st'>"dog"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;She is a dog who likes to dance.&quot;</code></pre>
</div>
<p>The user can overwrite the default.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>my_pet2</span><span class='op'>(</span>pronoun <span class='op'>=</span> <span class='st'>"she"</span>,
        animal <span class='op'>=</span> <span class='st'>"dog"</span>,
        verb <span class='op'>=</span> <span class='st'>"cuddle"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;She is a dog who likes to cuddle.&quot;</code></pre>
</div>
<h1 id="errors-and-warnings">Errors and warnings</h1>
<p>If someone else (or your future self) is going to use your function, it is helpful to embed errors with <code>stop()</code> and/or warnings with <code>warning()</code> into your code to explain why the code will not work (or if it will not work as expected).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># I am using an if else structure</span>
<span class='co'># If the user inputs "cat" for animal, the function will </span>
<span class='co'># throw an error and say "Sorry, this function doesn't work # for people who own cats"</span>
<span class='co'># If they use input any other animal, it will work</span>

<span class='va'>my_pet3</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>pronoun</span>, <span class='va'>animal</span>, <span class='va'>verb</span> <span class='op'>=</span> <span class='st'>"stretch"</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='va'>animal</span> <span class='op'>==</span> <span class='st'>"cat"</span><span class='op'>)</span><span class='op'>{</span>
    <span class='kw'><a href='https://rdrr.io/r/base/stop.html'>stop</a></span><span class='op'>(</span><span class='st'>"Sorry, this function doesn't work for people who own cats."</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'>else</span><span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>str_to_title</span><span class='op'>(</span><span class='va'>pronoun</span><span class='op'>)</span>, <span class='st'>" is a "</span>, <span class='va'>animal</span>, <span class='st'>" who likes to "</span>, <span class='va'>verb</span>, <span class='st'>"."</span><span class='op'>)</span>
    <span class='op'>}</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># This works</span>
<span class='fu'>my_pet3</span><span class='op'>(</span><span class='st'>"she"</span>, <span class='st'>"dog"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;She is a dog who likes to stretch.&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># This throws an error</span>
<span class='fu'>my_pet3</span><span class='op'>(</span><span class='st'>"he"</span>, <span class='st'>"cat"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Error in my_pet3(&quot;he&quot;, &quot;cat&quot;): Sorry, this function doesn&#39;t work for people who own cats.</code></pre>
</div>
<p>Instead of an error, you might just want to throw a warning, but still allow the function to work.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>my_pet4</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>pronoun</span>, <span class='va'>animal</span>, <span class='va'>verb</span> <span class='op'>=</span> <span class='st'>"stretch"</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='va'>animal</span> <span class='op'>!=</span> <span class='st'>"dog"</span><span class='op'>)</span><span class='op'>{</span>
    <span class='kw'><a href='https://rdrr.io/r/base/warning.html'>warning</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"Really? A "</span>, <span class='va'>animal</span>, <span class='st'>"? You should really consider getting a dog."</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'>str_to_title</span><span class='op'>(</span><span class='va'>pronoun</span><span class='op'>)</span>, <span class='st'>" is a "</span>, <span class='va'>animal</span>, <span class='st'>" who likes to "</span>, <span class='va'>verb</span>, <span class='st'>"."</span><span class='op'>)</span>
    
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>my_pet4</span><span class='op'>(</span><span class='st'>"he"</span>, <span class='st'>"cat"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Warning in my_pet4(&quot;he&quot;, &quot;cat&quot;): Really? A cat? You should really
consider getting a dog.</code></pre>
<pre><code>[1] &quot;He is a cat who likes to stretch.&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>my_pet4</span><span class='op'>(</span><span class='st'>"he"</span>, <span class='st'>"fish"</span>, <span class='st'>"swim"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Warning in my_pet4(&quot;he&quot;, &quot;fish&quot;, &quot;swim&quot;): Really? A fish? You should
really consider getting a dog.</code></pre>
<pre><code>[1] &quot;He is a fish who likes to swim.&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># works as normal</span>
<span class='fu'>my_pet4</span><span class='op'>(</span><span class='st'>"she"</span>, <span class='st'>"dog"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;She is a dog who likes to stretch.&quot;</code></pre>
</div>
<p>These are silly examples, but there are many reasons why you would want the function to output a warning or error. For example, you may want the function to warn someone if their input is not going to give them the output they expect, or if the function will not work for certain input. This will help the user work with your function to get their desired output.</p>
<h1 id="example-function-1">Example function 1</h1>
<p>What makes a particularly good function is code that you write a lot. Additionally, you want to make a function that is simple and only does one thing. For this first function, I am going to create a function that will create a “total” column that calculates the total observations across all levels of a grouping variable.</p>
<p>Before I create a function, I first like to try to make it work in a single case.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>gender</span><span class='op'>)</span>
<span class='va'>a</span>
</code></pre>
</div>
<pre><code>        year gender    n
1  1999-2000 female 5082
2  1999-2000   male 4883
3  2001-2002 female 5708
4  2001-2002   male 5331
5  2003-2004 female 5152
6  2003-2004   male 4970
7  2005-2006 female 5268
8  2005-2006   male 5080
9  2007-2008 female 5053
10 2007-2008   male 5096
11 2009-2010 female 5312
12 2009-2010   male 5225
13 2011-2012 female 4900
14 2011-2012   male 4856
15 2013-2014 female 5172
16 2013-2014   male 5003
17 2015-2016 female 5079
18 2015-2016   male 4892</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>b</span> <span class='op'>&lt;-</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span><span class='op'>)</span>
<span class='va'>b</span>
</code></pre>
</div>
<pre><code>       year     n
1 1999-2000  9965
2 2001-2002 11039
3 2003-2004 10122
4 2005-2006 10348
5 2007-2008 10149
6 2009-2010 10537
7 2011-2012  9756
8 2013-2014 10175
9 2015-2016  9971</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Join a and b by year</span>
<span class='co'># There are two n's so I am also changing the suffix of n so that they are labeled more clearly</span>

<span class='fu'>left_join</span><span class='op'>(</span><span class='va'>a</span>,<span class='va'>b</span>, by <span class='op'>=</span> <span class='st'>"year"</span>, 
          suffix <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"_group"</span>, <span class='st'>"_total"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>        year gender n_group n_total
1  1999-2000 female    5082    9965
2  1999-2000   male    4883    9965
3  2001-2002 female    5708   11039
4  2001-2002   male    5331   11039
5  2003-2004 female    5152   10122
6  2003-2004   male    4970   10122
7  2005-2006 female    5268   10348
8  2005-2006   male    5080   10348
9  2007-2008 female    5053   10149
10 2007-2008   male    5096   10149
11 2009-2010 female    5312   10537
12 2009-2010   male    5225   10537
13 2011-2012 female    4900    9756
14 2011-2012   male    4856    9756
15 2013-2014 female    5172   10175
16 2013-2014   male    5003   10175
17 2015-2016 female    5079    9971
18 2015-2016   male    4892    9971</code></pre>
</div>
<p>Now, let’s try to generalize it.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>total_grouping</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>var</span>, <span class='va'>grouping</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>var</span>, <span class='va'>grouping</span><span class='op'>)</span>
  <span class='va'>b</span> <span class='op'>&lt;-</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>var</span><span class='op'>)</span>
  <span class='va'>c</span> <span class='op'>&lt;-</span> <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>a</span>,<span class='va'>b</span>,by <span class='op'>=</span> <span class='st'>"year"</span>, 
          suffix <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"_group"</span>, <span class='st'>"_total"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='fu'>total_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>gender</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Error: Must group by variables found in `.data`.
* Column `var` is not found.
* Column `grouping` is not found.</code></pre>
</div>
<p>Unfortunately, from running this code, we get an error that says that the columns <code>var</code> and <code>grouping</code> are not found. This can happen when you use tidyverse functions to write functions because the tidyverse uses what is called <strong>non-standard evaluation</strong>. NSE makes the functions really user friendly. For example, when you use dplyr functions like <code>select(data, year)</code> or <code>group_by(data, year)</code>, the function knows that year is referring to <code>data$year</code> and not <code>year</code> from your global environment. However, this causes trouble when you try to use <code>select()</code> or <code>group_by()</code> (or in our case, <code>counts()</code>) in your own function. R looks for the column names (in our case, <code>var</code> and <code>grouping</code>) in your global environment but can’t find them. In order to work around this, we need to also use NSE. Here are two ways you can write the function with NSE:</p>
<ol type="1">
<li>{{}} Syntax</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>total_grouping</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>var</span>, <span class='va'>grouping</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>{</span><span class='op'>{</span><span class='va'>var</span><span class='op'>}</span><span class='op'>}</span>, <span class='op'>{</span><span class='op'>{</span><span class='va'>grouping</span><span class='op'>}</span><span class='op'>}</span><span class='op'>)</span> <span class='co'>##wrap the variables in {{}}</span>
  <span class='va'>b</span> <span class='op'>&lt;-</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>{</span><span class='op'>{</span><span class='va'>var</span><span class='op'>}</span><span class='op'>}</span><span class='op'>)</span>
  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>a</span>,<span class='va'>b</span>,by <span class='op'>=</span> <span class='st'>"year"</span>, 
          suffix <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"_group"</span>, <span class='st'>"_total"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='fu'>total_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>gender</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>       year gender n_group n_total
1 1999-2000 female    5082    9965
2 1999-2000   male    4883    9965
3 2001-2002 female    5708   11039
4 2001-2002   male    5331   11039
5 2003-2004 female    5152   10122
6 2003-2004   male    4970   10122</code></pre>
</div>
<ol start="2" type="1">
<li>Quote the variables</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>total_grouping</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>var</span>, <span class='va'>grouping</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>v1</span> <span class='op'>&lt;-</span> <span class='fu'>enquo</span><span class='op'>(</span><span class='va'>var</span><span class='op'>)</span>  <span class='co'>#quote the variables</span>
  <span class='va'>v2</span> <span class='op'>&lt;-</span> <span class='fu'>enquo</span><span class='op'>(</span><span class='va'>grouping</span><span class='op'>)</span>
  
  <span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>!</span><span class='op'>!</span><span class='va'>v1</span>, <span class='op'>!</span><span class='op'>!</span><span class='va'>v2</span><span class='op'>)</span> <span class='co'># use !! to evaluate the quoted variables</span>
  <span class='va'>b</span> <span class='op'>&lt;-</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>!</span><span class='op'>!</span><span class='va'>v1</span><span class='op'>)</span>
  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>a</span>,<span class='va'>b</span>,by <span class='op'>=</span> <span class='st'>"year"</span>, 
          suffix <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"_group"</span>, <span class='st'>"_total"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='fu'>total_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>gender</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>       year gender n_group n_total
1 1999-2000 female    5082    9965
2 1999-2000   male    4883    9965
3 2001-2002 female    5708   11039
4 2001-2002   male    5331   11039
5 2003-2004 female    5152   10122
6 2003-2004   male    4970   10122</code></pre>
</div>
<p>The great thing about functions is that we can now use our function with other variables, without having to copy,paste, and change the numbers. This cuts down on mistakes and makes your code easier to read.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>total_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>race_ethnic</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>       year        race_ethnic n_group n_total
1 1999-2000   mexican-american    3393    9965
2 1999-2000 non-hispanic-black    2228    9965
3 1999-2000 non-hispanic-white    3367    9965
4 1999-2000     other-hispanic     589    9965
5 1999-2000         other-race     388    9965
6 2001-2002   mexican-american    2776   11039</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>total_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>food_security</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>       year                food_security n_group n_total
1 1999-2000    Food insecure with hunger     499    9965
2 1999-2000 Food insecure without hunger    1209    9965
3 1999-2000            Fully food secure    7102    9965
4 1999-2000       Marginally food secure     889    9965
5 1999-2000                         &lt;NA&gt;     266    9965
6 2001-2002    Food insecure with hunger     627   11039</code></pre>
</div>
<h1 id="example-function-2">Example function 2</h1>
<p>You can use a previous function you have defined earlier in a script in a new function! Here, I am extending the previous function to make a column that will calculate the percentage of the count in a given year.</p>
<p>Let’s first try an example.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>total_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>gender</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>percent <span class='op'>=</span> <span class='va'>n_group</span><span class='op'>/</span><span class='va'>n_total</span> <span class='op'>*</span> <span class='fl'>100</span>, <span class='co'>#make a new variable called percent </span>
         percent <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>percent</span>, <span class='fl'>2</span><span class='op'>)</span>,
         percent <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>percent</span>, <span class='st'>"%"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'>#round it and add a % sign</span>
</code></pre>
</div>
<pre><code>        year gender n_group n_total percent
1  1999-2000 female    5082    9965     51%
2  1999-2000   male    4883    9965     49%
3  2001-2002 female    5708   11039  51.71%
4  2001-2002   male    5331   11039  48.29%
5  2003-2004 female    5152   10122   50.9%
6  2003-2004   male    4970   10122   49.1%
7  2005-2006 female    5268   10348  50.91%
8  2005-2006   male    5080   10348  49.09%
9  2007-2008 female    5053   10149  49.79%
10 2007-2008   male    5096   10149  50.21%
11 2009-2010 female    5312   10537  50.41%
12 2009-2010   male    5225   10537  49.59%
13 2011-2012 female    4900    9756  50.23%
14 2011-2012   male    4856    9756  49.77%
15 2013-2014 female    5172   10175  50.83%
16 2013-2014   male    5003   10175  49.17%
17 2015-2016 female    5079    9971  50.94%
18 2015-2016   male    4892    9971  49.06%</code></pre>
</div>
<p>Okay, now we’re ready to generalize. Note that I’m using NSE here too.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>percent_grouping</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>var</span>, <span class='va'>grouping</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'>total_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>{</span><span class='op'>{</span><span class='va'>var</span><span class='op'>}</span><span class='op'>}</span>, <span class='op'>{</span><span class='op'>{</span><span class='va'>grouping</span><span class='op'>}</span><span class='op'>}</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>percent <span class='op'>=</span> <span class='va'>n_group</span><span class='op'>/</span><span class='va'>n_total</span> <span class='op'>*</span> <span class='fl'>100</span>,
         percent <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>percent</span>, <span class='fl'>2</span><span class='op'>)</span>,
         percent <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>percent</span>, <span class='st'>"%"</span><span class='op'>)</span><span class='op'>)</span> 
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>percent_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>gender</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>       year gender n_group n_total percent
1 1999-2000 female    5082    9965     51%
2 1999-2000   male    4883    9965     49%
3 2001-2002 female    5708   11039  51.71%
4 2001-2002   male    5331   11039  48.29%
5 2003-2004 female    5152   10122   50.9%
6 2003-2004   male    4970   10122   49.1%</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>percent_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>race_ethnic</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>       year        race_ethnic n_group n_total percent
1 1999-2000   mexican-american    3393    9965  34.05%
2 1999-2000 non-hispanic-black    2228    9965  22.36%
3 1999-2000 non-hispanic-white    3367    9965  33.79%
4 1999-2000     other-hispanic     589    9965   5.91%
5 1999-2000         other-race     388    9965   3.89%
6 2001-2002   mexican-american    2776   11039  25.15%</code></pre>
</div>
<h1 id="tables">Tables</h1>
<p>Now, let’s make a table with our output. These tables will tell us how the demographics of our sample changed from year to year.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># creates an ugly first draft </span>
<span class='va'>temp_table</span> <span class='op'>&lt;-</span> <span class='fu'>percent_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>gender</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>year</span>, <span class='va'>gender</span>, <span class='va'>percent</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>pivot_wider</span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='va'>gender</span>,
              values_from <span class='op'>=</span> <span class='va'>percent</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span>

<span class='va'>temp_table</span>
</code></pre>
</div>
<pre><code>       [,1]        [,2]        [,3]        [,4]        [,5]       
year   &quot;1999-2000&quot; &quot;2001-2002&quot; &quot;2003-2004&quot; &quot;2005-2006&quot; &quot;2007-2008&quot;
female &quot;51%&quot;       &quot;51.71%&quot;    &quot;50.9%&quot;     &quot;50.91%&quot;    &quot;49.79%&quot;   
male   &quot;49%&quot;       &quot;48.29%&quot;    &quot;49.1%&quot;     &quot;49.09%&quot;    &quot;50.21%&quot;   
       [,6]        [,7]        [,8]        [,9]       
year   &quot;2009-2010&quot; &quot;2011-2012&quot; &quot;2013-2014&quot; &quot;2015-2016&quot;
female &quot;50.41%&quot;    &quot;50.23%&quot;    &quot;50.83%&quot;    &quot;50.94%&quot;   
male   &quot;49.59%&quot;    &quot;49.77%&quot;    &quot;49.17%&quot;    &quot;49.06%&quot;   </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># moves the first row to the title</span>
<span class='va'>table</span> <span class='op'>&lt;-</span> <span class='va'>temp_table</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>3</span>,<span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>table</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>temp_table</span><span class='op'>[</span><span class='fl'>1</span>,<span class='op'>]</span> 
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>table</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>table</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>str_to_title</span><span class='op'>(</span><span class='op'>)</span>

<span class='co'>#stylized table</span>
<span class='va'>table</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kbl.html'>kbl</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kable_styling.html'>kable_styling</a></span><span class='op'>(</span>bootstrap_options <span class='op'>=</span> <span class='st'>"striped"</span>, full_width <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span>  <span class='op'>%&gt;%</span> <span class='co'>#gives me a stylized striped table</span>
  <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/row_spec.html'>row_spec</a></span><span class='op'>(</span><span class='fl'>0</span>, angle <span class='op'>=</span> <span class='op'>-</span><span class='fl'>45</span><span class='op'>)</span> <span class='co'>#rotates column names</span>
</code></pre>
</div>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
1999-2000
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2001-2002
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2003-2004
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2005-2006
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2007-2008
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2009-2010
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2011-2012
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2013-2014
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2015-2016
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
51%
</td>
<td style="text-align:left;">
51.71%
</td>
<td style="text-align:left;">
50.9%
</td>
<td style="text-align:left;">
50.91%
</td>
<td style="text-align:left;">
49.79%
</td>
<td style="text-align:left;">
50.41%
</td>
<td style="text-align:left;">
50.23%
</td>
<td style="text-align:left;">
50.83%
</td>
<td style="text-align:left;">
50.94%
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
49%
</td>
<td style="text-align:left;">
48.29%
</td>
<td style="text-align:left;">
49.1%
</td>
<td style="text-align:left;">
49.09%
</td>
<td style="text-align:left;">
50.21%
</td>
<td style="text-align:left;">
49.59%
</td>
<td style="text-align:left;">
49.77%
</td>
<td style="text-align:left;">
49.17%
</td>
<td style="text-align:left;">
49.06%
</td>
</tr>
</tbody>
</table>
</div>
<p>I can generalize this with a function so I can make tables for other variables!</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>my_table</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>var</span>, <span class='va'>grouping</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>temp_table</span> <span class='op'>&lt;-</span> <span class='fu'>percent_grouping</span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>{</span><span class='op'>{</span><span class='va'>var</span><span class='op'>}</span><span class='op'>}</span>, <span class='op'>{</span><span class='op'>{</span><span class='va'>grouping</span><span class='op'>}</span><span class='op'>}</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>select</span><span class='op'>(</span><span class='op'>{</span><span class='op'>{</span><span class='va'>var</span><span class='op'>}</span><span class='op'>}</span>, <span class='op'>{</span><span class='op'>{</span><span class='va'>grouping</span><span class='op'>}</span><span class='op'>}</span>, <span class='va'>percent</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>pivot_wider</span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='op'>{</span><span class='op'>{</span><span class='va'>grouping</span><span class='op'>}</span><span class='op'>}</span>,
                values_from <span class='op'>=</span> <span class='va'>percent</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span>
  
  <span class='va'>table</span> <span class='op'>&lt;-</span> <span class='va'>temp_table</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>temp_table</span><span class='op'>)</span>,<span class='op'>]</span>
  <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>table</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>temp_table</span><span class='op'>[</span><span class='fl'>1</span>,<span class='op'>]</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>table</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>table</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>str_to_title</span><span class='op'>(</span><span class='op'>)</span>
  
  <span class='va'>table</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kbl.html'>kbl</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kable_styling.html'>kable_styling</a></span><span class='op'>(</span>bootstrap_options <span class='op'>=</span> <span class='st'>"striped"</span>, full_width <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/row_spec.html'>row_spec</a></span><span class='op'>(</span><span class='fl'>0</span>, angle <span class='op'>=</span> <span class='op'>-</span><span class='fl'>45</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>my_table</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>gender</span><span class='op'>)</span>
</code></pre>
</div>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
1999-2000
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2001-2002
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2003-2004
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2005-2006
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2007-2008
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2009-2010
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2011-2012
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2013-2014
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2015-2016
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
51%
</td>
<td style="text-align:left;">
51.71%
</td>
<td style="text-align:left;">
50.9%
</td>
<td style="text-align:left;">
50.91%
</td>
<td style="text-align:left;">
49.79%
</td>
<td style="text-align:left;">
50.41%
</td>
<td style="text-align:left;">
50.23%
</td>
<td style="text-align:left;">
50.83%
</td>
<td style="text-align:left;">
50.94%
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
49%
</td>
<td style="text-align:left;">
48.29%
</td>
<td style="text-align:left;">
49.1%
</td>
<td style="text-align:left;">
49.09%
</td>
<td style="text-align:left;">
50.21%
</td>
<td style="text-align:left;">
49.59%
</td>
<td style="text-align:left;">
49.77%
</td>
<td style="text-align:left;">
49.17%
</td>
<td style="text-align:left;">
49.06%
</td>
</tr>
</tbody>
</table>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>my_table</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>race_ethnic</span><span class='op'>)</span>
</code></pre>
</div>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
1999-2000
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2001-2002
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2003-2004
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2005-2006
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2007-2008
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2009-2010
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2011-2012
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2013-2014
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2015-2016
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mexican-American
</td>
<td style="text-align:left;">
34.05%
</td>
<td style="text-align:left;">
25.15%
</td>
<td style="text-align:left;">
24.89%
</td>
<td style="text-align:left;">
27.51%
</td>
<td style="text-align:left;">
21.25%
</td>
<td style="text-align:left;">
22.63%
</td>
<td style="text-align:left;">
13.89%
</td>
<td style="text-align:left;">
17%
</td>
<td style="text-align:left;">
19.27%
</td>
</tr>
<tr>
<td style="text-align:left;">
Non-Hispanic-Black
</td>
<td style="text-align:left;">
22.36%
</td>
<td style="text-align:left;">
24.29%
</td>
<td style="text-align:left;">
26.31%
</td>
<td style="text-align:left;">
26.19%
</td>
<td style="text-align:left;">
21.79%
</td>
<td style="text-align:left;">
18.57%
</td>
<td style="text-align:left;">
27.5%
</td>
<td style="text-align:left;">
22.28%
</td>
<td style="text-align:left;">
21.35%
</td>
</tr>
<tr>
<td style="text-align:left;">
Non-Hispanic-White
</td>
<td style="text-align:left;">
33.79%
</td>
<td style="text-align:left;">
41.72%
</td>
<td style="text-align:left;">
40.83%
</td>
<td style="text-align:left;">
37.96%
</td>
<td style="text-align:left;">
40.55%
</td>
<td style="text-align:left;">
41.95%
</td>
<td style="text-align:left;">
30.47%
</td>
<td style="text-align:left;">
36.11%
</td>
<td style="text-align:left;">
30.75%
</td>
</tr>
<tr>
<td style="text-align:left;">
Other-Hispanic
</td>
<td style="text-align:left;">
5.91%
</td>
<td style="text-align:left;">
4.68%
</td>
<td style="text-align:left;">
3.37%
</td>
<td style="text-align:left;">
3.37%
</td>
<td style="text-align:left;">
11.83%
</td>
<td style="text-align:left;">
10.75%
</td>
<td style="text-align:left;">
11.03%
</td>
<td style="text-align:left;">
9.43%
</td>
<td style="text-align:left;">
13.12%
</td>
</tr>
<tr>
<td style="text-align:left;">
Other-Race
</td>
<td style="text-align:left;">
3.89%
</td>
<td style="text-align:left;">
4.16%
</td>
<td style="text-align:left;">
4.6%
</td>
<td style="text-align:left;">
4.97%
</td>
<td style="text-align:left;">
4.58%
</td>
<td style="text-align:left;">
6.1%
</td>
<td style="text-align:left;">
17.11%
</td>
<td style="text-align:left;">
15.17%
</td>
<td style="text-align:left;">
15.51%
</td>
</tr>
</tbody>
</table>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>my_table</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>year</span>, <span class='va'>food_security</span><span class='op'>)</span>
</code></pre>
</div>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
1999-2000
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2001-2002
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2003-2004
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2005-2006
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2007-2008
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2009-2010
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2011-2012
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2013-2014
</th>
<th style="text-align:left;-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg);">
2015-2016
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Food Insecure With Hunger
</td>
<td style="text-align:left;">
5.01%
</td>
<td style="text-align:left;">
5.68%
</td>
<td style="text-align:left;">
6.33%
</td>
<td style="text-align:left;">
5.83%
</td>
<td style="text-align:left;">
6.25%
</td>
<td style="text-align:left;">
7.99%
</td>
<td style="text-align:left;">
7.98%
</td>
<td style="text-align:left;">
7.3%
</td>
<td style="text-align:left;">
9%
</td>
</tr>
<tr>
<td style="text-align:left;">
Food Insecure Without Hunger
</td>
<td style="text-align:left;">
12.13%
</td>
<td style="text-align:left;">
11.68%
</td>
<td style="text-align:left;">
12.17%
</td>
<td style="text-align:left;">
13.02%
</td>
<td style="text-align:left;">
13.34%
</td>
<td style="text-align:left;">
14.87%
</td>
<td style="text-align:left;">
15.05%
</td>
<td style="text-align:left;">
14.47%
</td>
<td style="text-align:left;">
16.53%
</td>
</tr>
<tr>
<td style="text-align:left;">
Fully Food Secure
</td>
<td style="text-align:left;">
71.27%
</td>
<td style="text-align:left;">
67.97%
</td>
<td style="text-align:left;">
68.39%
</td>
<td style="text-align:left;">
69.8%
</td>
<td style="text-align:left;">
68.25%
</td>
<td style="text-align:left;">
63.18%
</td>
<td style="text-align:left;">
62.41%
</td>
<td style="text-align:left;">
65.41%
</td>
<td style="text-align:left;">
56.67%
</td>
</tr>
<tr>
<td style="text-align:left;">
Marginally Food Secure
</td>
<td style="text-align:left;">
8.92%
</td>
<td style="text-align:left;">
8.5%
</td>
<td style="text-align:left;">
8.58%
</td>
<td style="text-align:left;">
10.1%
</td>
<td style="text-align:left;">
11.31%
</td>
<td style="text-align:left;">
12.82%
</td>
<td style="text-align:left;">
14.05%
</td>
<td style="text-align:left;">
11.63%
</td>
<td style="text-align:left;">
14.37%
</td>
</tr>
<tr>
<td style="text-align:left;">
Na
</td>
<td style="text-align:left;">
2.67%
</td>
<td style="text-align:left;">
6.18%
</td>
<td style="text-align:left;">
4.53%
</td>
<td style="text-align:left;">
1.26%
</td>
<td style="text-align:left;">
0.85%
</td>
<td style="text-align:left;">
1.14%
</td>
<td style="text-align:left;">
0.5%
</td>
<td style="text-align:left;">
1.2%
</td>
<td style="text-align:left;">
3.43%
</td>
</tr>
</tbody>
</table>
</div>
<p>Over time, as you use your function with different examples, you may want to tweak it. For example, I noticed by using the food security variable that I never explictly removed NAs. You may want to always remove NAs. Or, you can give your user an option to remove NAs or not by creating an argument called “remove.nas” and set it to TRUE to remove NAs by default. Then, if the user wants to see the NAs, they can set it to FALSE.</p>
<p>Additionally, I noticed that I made sure that my row names were capitalized, but I didn’t do that for the column names because it wasn’t relevant here (in all my examples the column names were numbers). This is why it is helpful to test your functions under as many different conditions as you can think of!</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
